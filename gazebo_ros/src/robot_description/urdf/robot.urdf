<?xml version="1.6"?>

<robot name="robot">

  <link name="link_0">
		<inertial>
			<origin rpy="0 0 0" xyz="0 0 0.21"/>
      <mass value="20"/>
      <inertia ixx="0.48333333" iyy="0.88333333" izz="1.23333333" ixy="0.0" ixz="0.0" iyz="0.0"/>
    </inertial>

 		<visual>
      <geometry>
        <box size="0.7 0.4 0.2"/>
      </geometry>     
      <origin rpy="0 0 0" xyz="0 0 0.21"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.7 0.4 0.2"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.21"/>
    </collision>
  </link>

	<gazebo reference="link_0">
		<collision>
			<surface>
				<friction>
					<ode>
						<mu>1</mu>
            <mu2>1</mu2>
            <fdir1>0 0 0</fdir1>
            <slip1>0</slip1>
            <slip2>0</slip2>
          </ode>
					<torsional>
            <coefficient>1</coefficient>
            <patch_radius>0</patch_radius>
            <surface_radius>0</surface_radius>
            <use_patch_radius>1</use_patch_radius>
          <ode>
            <slip>0</slip>
          </ode>
          </torsional>
				</friction>
				<bounce>
            <restitution_coefficient>0</restitution_coefficient>
            <threshold>1e+06</threshold>
          </bounce>
          <contact>
            <collide_without_contact>0</collide_without_contact>
            <collide_without_contact_bitmask>1</collide_without_contact_bitmask>
            <collide_bitmask>1</collide_bitmask>
            <ode>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
              <max_vel>0.01</max_vel>
              <min_depth>0</min_depth>
            </ode>
            <bullet>
              <split_impulse>1</split_impulse>
              <split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
            </bullet>
          </contact>
			</surface>
		</collision>
		
	</gazebo>

	
	<link name="link_0_0">
			<visual>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>     
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.1" length="0.05"/>
      </geometry>
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </collision>
    <inertial>
      <mass value="4"/>
      <inertia ixx="0.01083333" iyy="0.01083333" izz="0.01083333" ixy="0.0" ixz="0.0" iyz="0.0"/>
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </inertial>
	</link>
		
	<gazebo reference="link_0_0">
		<collision>
			<surface>
          <friction>
            <ode>
              <mu>1</mu>
              <mu2>1</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
            <torsional>
              <coefficient>1</coefficient>
              <patch_radius>0</patch_radius>
              <surface_radius>0</surface_radius>
              <use_patch_radius>1</use_patch_radius>
              <ode>
                <slip>0</slip>
              </ode>
            </torsional>
          </friction>
          <bounce>
            <restitution_coefficient>0</restitution_coefficient>
            <threshold>1e+06</threshold>
          </bounce>
          <contact>
            <collide_without_contact>0</collide_without_contact>
            <collide_without_contact_bitmask>1</collide_without_contact_bitmask>
            <collide_bitmask>1</collide_bitmask>
            <ode>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
              <max_vel>0.01</max_vel>
              <min_depth>0</min_depth>
            </ode>
            <bullet>
              <split_impulse>1</split_impulse>
              <split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
            </bullet>
          </contact>
        </surface>
      </collision>
	</gazebo>

	
	<link name="link_2">
		 		<visual>
      <geometry>
        <cylinder radius="0.16" length="0.1"/>
      </geometry>     
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.16" length="0.1"/>
      </geometry>
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </collision>
    <inertial>
      <mass value="2"/>
      <inertia ixx="0.0152" iyy="0.0152" izz="0.0256" ixy="0.0" ixz="0.0" iyz="0.0"/>
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </inertial>
  </link>

	<gazebo reference="link_2">
		<collision>
			<surface>
          <friction>
            <ode>
              <mu>1</mu>
              <mu2>1</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
            <torsional>
              <coefficient>1</coefficient>
              <patch_radius>0</patch_radius>
              <surface_radius>0</surface_radius>
              <use_patch_radius>1</use_patch_radius>
              <ode>
                <slip>0</slip>
              </ode>
            </torsional>
          </friction>
          <bounce>
            <restitution_coefficient>0</restitution_coefficient>
            <threshold>1e+06</threshold>
          </bounce>
          <contact>
            <collide_without_contact>0</collide_without_contact>
            <collide_without_contact_bitmask>1</collide_without_contact_bitmask>
            <collide_bitmask>1</collide_bitmask>
            <ode>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
              <max_vel>0.01</max_vel>
              <min_depth>0</min_depth>
            </ode>
            <bullet>
              <split_impulse>1</split_impulse>
              <split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
            </bullet>
          </contact>
        </surface>
      </collision>	
		</gazebo>


	<link name="link_2_clone">
		 		<visual>
      <geometry>
        <cylinder radius="0.16" length="0.1"/>
      </geometry>     
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </visual>
    <collision>
      <geometry>
        <cylinder radius="0.16" length="0.1"/>
      </geometry>
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </collision>
    <inertial>
      <mass value="2"/>
      <inertia ixx="0.0152" iyy="0.0152" izz="0.0256" ixy="0.0" ixz="0.0" iyz="0.0"/>
      <origin rpy="1.5707 0 0" xyz="0 0 0.21"/>
    </inertial>
  </link>

	<gazebo reference="link_2_clone">
		<collision>
			<surface>
          <friction>
            <ode>
              <mu>1</mu>
              <mu2>1</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
            <torsional>
              <coefficient>1</coefficient>
              <patch_radius>0</patch_radius>
              <surface_radius>0</surface_radius>
              <use_patch_radius>1</use_patch_radius>
              <ode>
                <slip>0</slip>
              </ode>
            </torsional>
          </friction>
          <bounce>
            <restitution_coefficient>0</restitution_coefficient>
            <threshold>1e+06</threshold>
          </bounce>
          <contact>
            <collide_without_contact>0</collide_without_contact>
            <collide_without_contact_bitmask>1</collide_without_contact_bitmask>
            <collide_bitmask>1</collide_bitmask>
            <ode>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
              <max_vel>0.01</max_vel>
              <min_depth>0</min_depth>
            </ode>
            <bullet>
              <split_impulse>1</split_impulse>
              <split_impulse_penetration_threshold>-0.01</split_impulse_penetration_threshold>
              <soft_cfm>0</soft_cfm>
              <soft_erp>0.2</soft_erp>
              <kp>1e+13</kp>
              <kd>1</kd>
            </bullet>
          </contact>
        </surface>
      </collision>	
		</gazebo>


	<link name="base">

    <collision name="scaner_collision">
      <geometry>
				<cylinder length="0.210" radius="0.155"/>
      </geometry>
    </collision>

    <!-- The visual is mostly a copy of the collision -->
    <visual name="base_visual">
      <geometry>
				<cylinder length="0.210" radius="0.155"/>
      </geometry>
    </visual>
		
    <inertial>
      <mass value="4.5"/>
      <inertia ixx="0.07" ixy="0.0" ixz="0.0" iyy="0.07" iyz="0.0" izz="0.07"/>
    </inertial>
  </link>
	<gazebo reference="base">
		<sensor type="ray" name="sensor">
		

  <!-- Enable visualization to see the rays in the GUI -->
  <visualize>true</visualize>

  <!-- Set the update rate of the sensor -->
  <update_rate>10</update_rate>
<ray>
	

  <scan>

    <horizontal>
      <samples>120</samples>

      <resolution>1</resolution>

      <!-- Minimum angle in radians -->
      <min_angle>0</min_angle>

      <!-- Maximum angle in radians -->
      <max_angle>3.14</max_angle>
    </horizontal>



  </scan>

  <!-- Range defines characteristics of an individual beam -->
  <range>

    <!-- Minimum distance of the beam -->
    <min>0.185</min>

    <!-- Maximum distance of the beam -->
    <max>10</max>

    <!-- Linear resolution of the beam -->
    <resolution>0.001</resolution>
  </range>
</ray>
<plugin name="gazebo_ros_controller" filename="libgazebo_ros_laser.so">
        <topicName>laser_scan</topicName>
        <frameName>robot_link</frameName>
</plugin>
</sensor>
</gazebo>


	<joint name="link_0_JOINT_2" type="revolute">
		<axis xyz="0 1 0"/>
		<limit effort="-1" lower="-1.79769e+308" upper="1.79769e+308" velocity="-10"/>
		<origin rpy="0 0 0" xyz="0.24 0 -0.11"/>
    <parent link="link_0"/>
    <child link="link_0_0"/>
      <physics>
        <ode>
          <limit>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </limit>
          <suspension>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </suspension>
        </ode>
      </physics>
    </joint>

	
	<joint name="left_wheel" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-1.79769e+308" upper="1.79769e+308" velocity="-10"/>
    <origin rpy="0 0 0" xyz="-0.1 0.26  -0.05"/>
    <parent link="link_0"/>
    <child link="link_2"/>
			<physics>
        <ode>
          <limit>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </limit>
          <suspension>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </suspension>
        </ode>
      </physics>
  </joint>


	<joint name="right_wheel" type="revolute">
    <axis xyz="0 1 0"/>
    <limit effort="-1" lower="-1.79769e+308" upper="1.79769e+308" velocity="-10"/>
    <origin rpy="0 0 0" xyz="-0.1 -0.26 -0.05"/>
    <parent link="link_0"/>
    <child link="link_2_clone"/>
			<physics>
        <ode>
          <limit>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </limit>
          <suspension>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </suspension>
        </ode>
      </physics>
  </joint>

	
	<joint name="link_0_JOINT_0" type="fixed">
    <origin rpy="0 0 -1.5707" xyz="0 0 0.41"/>
    <parent link="link_0"/>
    <child link="base"/>
      <physics>
        <ode>
          <limit>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </limit>
          <suspension>
            <cfm>0</cfm>
            <erp>0.2</erp>
          </suspension>
        </ode>
      </physics>
    </joint>


	<gazebo>
		<plugin name='diff' filename='libDiffDrivePlugin.so'>
      <left_joint>left_wheel</left_joint>
      <right_joint>right_wheel</right_joint>
      <torque>5</torque>
    </plugin>
	</gazebo>

	<gazebo>
		<plugin name="SetPose" filename="libSetPose.so">
		</plugin>
	</gazebo>
	
	<gazebo>
	<plugin name="3dplot" filename="libLinkPlot3DPlugin.so">
 <frequency>50</frequency>
 <plot>
   <link>link_0</link>

   <pose>0 0 0.02 0 0 0</pose>

   <material>Gazebo/White</material>
 </plot>

 
</plugin> 
		</gazebo>
	
	
		
</robot>
